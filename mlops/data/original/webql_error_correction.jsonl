{"instruction": "Fix this broken WebQL query", "input": "{url: 'example.com', steps: {xpath: '//div', fields: {text: 'text()'}}}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div\",\n      \"@fields\": {\n        \"text\": \".//text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Added @ prefixes to url, steps, xpath, fields\n- Added https:// protocol\n- Made steps an array []\n- Added relative path . to XPath in fields\n- Quoted all keys and values properly"}
{"instruction": "Fix this broken WebQL query", "input": "{'@url': 'site.com', '@steps': {'@xpath': '//product', '@fields': {'name': 'h3/text()'}}}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://site.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//product\",\n      \"@fields\": {\n        \"name\": \".//h3/text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Changed single quotes to double quotes for valid JSON\n- Made @steps an array [] instead of single object\n- Added relative path . to XPath in @fields\n- Added https:// protocol to URL"}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"example.com\", \"@xpath\": \"//div[@class='item']\", \"text\": \"./text()\"}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div[@class='item']\",\n      \"@fields\": {\n        \"text\": \".//text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Added https:// protocol\n- Wrapped extraction in @steps array\n- Moved @xpath inside step object\n- Wrapped field extraction in @fields object\n- Fixed XPath syntax (.//text() not ./text())"}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"https://example.com\", \"@steps\": [{\"@xpath\": \"//div\", \"name\": \"@name\", \"price\": \"@price\"}]}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div\",\n      \"@fields\": {\n        \"name\": \".//span[@class='name']/text()\",\n        \"price\": \".//span[@class='price']/text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Added @fields wrapper for field definitions\n- Changed field values from placeholder @name/@price to actual XPath expressions\n- Used relative XPath paths starting with .\n- Added realistic selectors for name and price extraction"}
{"instruction": "Fix this broken WebQL query", "input": "{\"url\": \"https://example.com\", \"steps\": [{\"xpath\": \"//a\", \"href\": \"@href\", \"text\": \"text()\"}]}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//a\",\n      \"@fields\": {\n        \"href\": \"./@href\",\n        \"text\": \".//text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Added @ prefix to url, steps, xpath\n- Added @fields wrapper\n- Fixed attribute extraction (./@href not @href)\n- Fixed text extraction (.//text() not text())\n- Made field values proper XPath expressions"}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"https://example.com\", \"@actions\": \"wait\", \"@steps\": {\"@xpath\": \"//div\", \"@fields\": {\"text\": \"text()\"}}}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@actions\": [\n    {\n      \"@type\": \"wait\",\n      \"@until\": \"element\",\n      \"@selector\": \"div\",\n      \"@timeout\": 5000\n    }\n  ],\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div\",\n      \"@fields\": {\n        \"text\": \".//text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Made @actions an array with proper action object structure\n- Added required @type, @until, @selector, @timeout to action\n- Made @steps an array\n- Fixed XPath in @fields to use relative path (.//text())"}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"https://example.com\", \"@steps\": [{\"@xpath\": \"//div[@class='product']\", \"@fields\": {\"name\": \"h3\", \"price\": \"span.price\"}}]}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div[@class='product']\",\n      \"@fields\": {\n        \"name\": \".//h3/text()\",\n        \"price\": \".//span[@class='price']/text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Changed CSS selector 'h3' to XPath './/h3/text()'\n- Changed CSS selector 'span.price' to XPath './/span[@class=\"price\"]/text()'\n- Added relative path . prefix\n- Added /text() to extract text content\n- WebQL uses XPath, not CSS selectors"}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"https://example.com\", \"@steps\": [{\"@xpath\": \"//div\", \"@fields\": {\"link\": \"a/@href\", \"image\": \"img/@src\"}}]}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div\",\n      \"@fields\": {\n        \"link\": \".//a/@href\",\n        \"image\": \".//img/@src\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Added relative path . prefix to XPath expressions\n- Changed 'a/@href' to './/a/@href'\n- Changed 'img/@src' to './/img/@src'\n- In WebQL @fields, always use relative XPath starting with ."}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"https://example.com\", \"@steps\": [{\"@xpath\": \"//article\", \"@fields\": {\"title\": \"//h1/text()\", \"content\": \"//p/text()\"}}]}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//article\",\n      \"@fields\": {\n        \"title\": \".//h1/text()\",\n        \"content\": \".//p/text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Changed absolute XPath '//h1/text()' to relative './/h1/text()'\n- Changed absolute XPath '//p/text()' to relative './/p/text()'\n- In @fields, use relative paths (.) to search within the selected element\n- Absolute paths (//) search the entire document, not the current element"}
{"instruction": "Fix this broken WebQL query", "input": "{\"@url\": \"https://example.com\", \"@steps\": [{\"@css\": \".product\", \"@fields\": {\"name\": \".title\"}}]}", "output": "Fixed WebQL:\n{\n  \"@url\": \"https://example.com\",\n  \"@steps\": [\n    {\n      \"@xpath\": \"//div[@class='product']\",\n      \"@fields\": {\n        \"name\": \".//div[@class='title']/text()\"\n      }\n    }\n  ]\n}\n\nErrors fixed:\n- Changed @css to @xpath (WebQL uses XPath, not CSS selectors)\n- Converted CSS selector '.product' to XPath '//div[@class=\"product\"]'\n- Converted CSS selector '.title' to XPath './/div[@class=\"title\"]/text()'\n- Added /text() to extract text content\n- WebQL is XPath-based, not CSS-based"}